#!/usr/bin/env bash

SCRIPT_DIR=$(cd $(dirname $0) && pwd)

# Script path for package
VENDOR_SCRIPT=$SCRIPT_DIR/migrate.hh

# Script path for composer
INSTALLED_SCRIPT=$SCRIPT_DIR/../hhpack/migrate/bin/migrate.hh

HHVM_OPTIONS="-vHack.Lang.LookForTypechecker=0 -vEval.Jit=0"

if [ -e $VENDOR_SCRIPT ]; then
  hhvm $HHVM_OPTIONS $VENDOR_SCRIPT $*
fi

if [ -e $INSTALLED_SCRIPT ]; then
  hhvm $HHVM_OPTIONS $INSTALLED_SCRIPT $*
fi
